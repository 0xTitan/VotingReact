{"version":3,"sources":["contexts/EthContext/EthContext.js","contexts/EthContext/state.js","contexts/EthContext/EthProvider.jsx","contexts/EthContext/useEth.js","components/Account/AccoutInfo.jsx","components/Worflow/Workflow.jsx","components/EventDisplayer/EventDisplayer.jsx","components/NavBar/Navbar.jsx","components/VoterRegistration/VoterRegistration.jsx","components/ProposalRegistration/ProposalRegistration.jsx","components/ProposalItem/ProposalItem.jsx","components/ProposalList/ProposalList.jsx","components/VoteResult/VoteResult.jsx","components/VoterInfo/VoterInfo.jsx","components/Home/Home.jsx","components/Events/Events.jsx","components/TransferOwnerShip/TransferOnwerShip.jsx","App.jsx","index.js"],"names":["EthContext","createContext","actions","initialState","artifact","web3","accounts","networkID","contract","reducer","state","action","type","data","Error","EthProvider","children","useReducer","dispatch","init","useCallback","Web3","givenProvider","eth","requestAccounts","getBalance","currentBalance","net","getId","abi","address","networks","Contract","err","console","error","useEffect","tryInit","require","events","handleChange","e","log","forEach","window","ethereum","on","removeListener","Provider","value","useEth","useContext","AccountInfo","handleOwnerCheck","handleVoterRegisteredCheck","handleHasVotedCheck","handleProposalIfVotedFor","handleWorkflowStatusCheck","useState","balance","setBalance","setAddress","network","setNetwork","setWorkflowStatus","valueWei","valueEth","utils","fromWei","Number","toFixed","getCurrentAddress","addr","substring","length","getNetwork","isOwner","methods","owner","call","from","getCurrentWorkflowAndVoterRegistered","workflowStatus","isRegistered","getVoter","hasVoted","votedProposalId","className","Worflow","showEvent","read","checkStatus","status","startProposalsRegistering","send","transact","WorkflowStatusChange","returnValues","newStatus","previousStatus","endProposalsRegistering","startVotingSession","endVotingSession","tallyVotes","disabled","onClick","EventDisplayer","raisedEvent","interval","setInterval","clearInterval","Navbar","displaySubNav","setDisplaySubNav","hideSubNav","to","onMouseEnter","style","visibility","VoterRegistration","voterAddress","valid","voterAddressList","setVoterAddressList","handleAddVoter","handleRegisterVoters","index","addVoter","VoterRegistered","map","currentVoter","name","id","placeholder","onChange","target","listVoter","handleAddressChange","addressLength","ProposalRegistration","proposal","registered","proposalList","setProposalList","handleAddProposal","handleRegisterProposals","prop","addProposal","ProposalRegistered","proposalId","listProposal","currentProposal","ProposalItem","proposalIdVotedFor","setData","voteId","setVoteId","retrievePropName","idProp","getOneProposal","description","voteCount","handleVote","setVote","transac","Voted","voter","ProposalList","pastEvents","setPastEvents","loading","fetchData","getProposalList","optionsPast","filter","fromBlock","toBlock","getPastEvents","event","VoteResult","winingProposal","setWinningProposal","getWinner","winningProposalId","VoterInfo","setVoter","addressValid","setAddressValid","setProposal","answer","setAnswer","checkVoterInfo","voterInfo","Home","isRegister","currentWorflow","Events","workflowEvents","setWorkflowEvents","proposalEvents","setProposalEvents","voterEvents","setVoterEvents","voteEvents","setVoteEvents","optionsNew","watchEvents","listenProposal","listenWorkflowStatus","listenVoter","listenVote","oldEvents","listId","newEvent","listAddress","listVote","currentEvent","TransferOnwerShip","newOwner","setNewOwner","setValid","navigate","useNavigate","handleOwnerRegistration","transferOwnership","handleOwnerChange","App","setOwner","setRegistered","setHasVoted","setProposalIfVotedFor","setCurrentWorflow","SetRaisedEvent","voted","propIdVotedFor","path","element","replace","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.e0755652.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nconst EthContext = createContext();\n\nexport default EthContext;\n","const actions = {\n  init: \"INIT\",\n};\n\nconst initialState = {\n  artifact: null,\n  web3: null,\n  accounts: null,\n  networkID: null,\n  contract: null\n};\n\nconst reducer = (state, action) => {\n  const { type, data } = action;\n  switch (type) {\n    case actions.init:\n      return { ...state, ...data };\n    default:\n      throw new Error(\"Undefined reducer action type\");\n  }\n};\n\nexport {\n  actions,\n  initialState,\n  reducer\n};\n","import React, { useReducer, useCallback, useEffect } from \"react\";\nimport Web3 from \"web3\";\nimport EthContext from \"./EthContext\";\nimport { reducer, actions, initialState } from \"./state\";\n\nfunction EthProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const init = useCallback(async (artifact) => {\n    if (artifact) {\n      const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n      const accounts = await web3.eth.requestAccounts();\n      const currentBalance = await web3.eth.getBalance(accounts[0]);\n\n      const networkID = await web3.eth.net.getId();\n      const { abi } = artifact;\n      let address, contract;\n      try {\n        address = artifact.networks[networkID].address;\n        contract = new web3.eth.Contract(abi, address);\n      } catch (err) {\n        console.error(err);\n      }\n      dispatch({\n        type: actions.init,\n        data: { artifact, web3, accounts, networkID, contract, currentBalance },\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    const tryInit = async () => {\n      try {\n        const artifact = require(\"../../contracts/Voting.json\");\n        init(artifact);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    tryInit();\n  }, [init]);\n\n  useEffect(() => {\n    const events = [\"chainChanged\", \"accountsChanged\", \"connect\", \"disconnect\"];\n    const handleChange = (e) => {\n      console.log(e);\n      console.log(state);\n      if (e == \"disconnect\") {\n        state.artifact = null;\n        init(state.artifact);\n      }\n      {\n        if (!state.artifact) {\n          const artifact = require(\"../../contracts/Voting.json\");\n          init(artifact);\n        } else {\n          init(state.artifact);\n        }\n      }\n    };\n\n    events.forEach((e) => {\n      window.ethereum.on(e, () => handleChange(e));\n    });\n    return () => {\n      events.forEach((e) => window.ethereum.removeListener(e, handleChange));\n    };\n  }, [init, state.artifact]);\n\n  return (\n    <EthContext.Provider\n      value={{\n        state,\n        dispatch,\n      }}\n    >\n      {children}\n    </EthContext.Provider>\n  );\n}\n\nexport default EthProvider;\n","import { useContext } from \"react\";\nimport EthContext from \"./EthContext\";\n\nconst useEth = () => useContext(EthContext);\n\nexport default useEth;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./AccountInfo.css\";\n\nfunction AccountInfo({\n  handleOwnerCheck,\n  handleVoterRegisteredCheck,\n  handleHasVotedCheck,\n  handleProposalIfVotedFor,\n  handleWorkflowStatusCheck,\n}) {\n  const {\n    state: { accounts, networkID, web3, contract },\n  } = useEth();\n\n  const [balance, setBalance] = useState(0);\n  const [address, setAddress] = useState(\"\");\n  const [network, setNetwork] = useState(\"\");\n  const [workflowStatus, setWorkflowStatus] = useState(0);\n\n  const getBalance = async () => {\n    // const value = contract\n    //   ? await contract.methods.winningProposalID().call({ from: accounts[0] })\n    //   : -1;\n\n    const valueWei = web3 ? await web3.eth.getBalance(accounts[0]) : 0;\n    let valueEth = web3 ? web3.utils.fromWei(valueWei, \"ether\") : 0;\n    valueEth = Number(valueEth).toFixed(3);\n    setBalance(valueEth + \" ETH\");\n  };\n\n  const getCurrentAddress = async () => {\n    if (accounts) {\n      const addr =\n        accounts[0].substring(0, 7) +\n        \"...\" +\n        accounts[0].substring(accounts[0].length - 4, accounts[0].length);\n      setAddress(addr);\n    }\n  };\n\n  const getNetwork = async () => {\n    console.log(networkID);\n    switch (networkID) {\n      case 1:\n        setNetwork(\"Ethereum\");\n        break;\n      case 3:\n        setNetwork(\"Ropsten\");\n        break;\n      case 4:\n        setNetwork(\"Rinkeby\");\n        break;\n      case 5:\n        setNetwork(\"Goerli\");\n        break;\n      default:\n        setNetwork(\"local - \" + networkID);\n    }\n  };\n\n  const isOwner = async () => {\n    const value = contract\n      ? await contract.methods.owner().call({ from: accounts[0] })\n      : -1;\n    if (value === accounts[0]) {\n      handleOwnerCheck(true);\n    } else {\n      handleOwnerCheck(false);\n    }\n  };\n\n  const getCurrentWorkflowAndVoterRegistered = async () => {\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    console.log(\"status : \" + value);\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n    if (value > 0) {\n      isRegistered();\n    }\n  };\n\n  const isRegistered = async () => {\n    try {\n      const value = contract\n        ? await contract.methods\n            .getVoter(accounts[0])\n            .call({ from: accounts[0] })\n        : null;\n      console.log(value);\n      if (value.isRegistered) {\n        handleVoterRegisteredCheck(true);\n      } else {\n        handleVoterRegisteredCheck(false);\n      }\n      if (value.hasVoted) {\n        handleHasVotedCheck(true);\n      } else {\n        handleHasVotedCheck(false);\n      }\n      if (value.votedProposalId >= 0 && value.hasVoted) {\n        handleProposalIfVotedFor(value.votedProposalId);\n      } else {\n        handleProposalIfVotedFor(-1);\n      }\n    } catch (err) {\n      console.log(err);\n      handleVoterRegisteredCheck(false);\n      handleHasVotedCheck(false);\n      handleProposalIfVotedFor(-1);\n    }\n  };\n\n  useEffect(() => {\n    if (web3) {\n      getCurrentAddress();\n      getBalance();\n      getNetwork();\n      isOwner();\n      getCurrentWorkflowAndVoterRegistered();\n    }\n  }, [web3, accounts, address, handleWorkflowStatusCheck]);\n\n  return (\n    <div>\n      {address && (\n        <div className=\"class-accountInfo\">\n          <p className=\"class-itemAccountInfo\">{address}</p>\n          <p className=\"class-itemAccountInfo\">{balance}</p>\n          <p className=\"class-itemAccountInfo\">{network}</p>\n        </div>\n      )}\n      {!address && (\n        <div className=\"class-accountInfo\">\n          <p className=\"class-itemAccountInfo\">Not connected</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountInfo;\n","import { useState, useEffect, useCallback } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./Workflow.css\";\n\nfunction Worflow({ handleWorkflowStatusCheck, showEvent }) {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n  const [workflowStatus, setWorkflowStatus] = useState(0);\n\n  useEffect(() => {\n    console.log(\"render workflow\");\n    if (accounts) {\n      read();\n    }\n  }, [accounts]);\n\n  const read = useCallback(async () => {\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n  }, [contract]);\n\n  const checkStatus = (status) => {\n    return status - 1 == workflowStatus;\n  };\n\n  const startProposalsRegistering = async (e) => {\n    const transact = await contract.methods\n      .startProposalsRegistering()\n      .send({ from: accounts[0] });\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n    //get event from transaction.0\n    showEvent(\n      \"Workflow updated to  :\" +\n      transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n    console.log(\n      \"Previous status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.previousStatus\n    );\n    console.log(\n      \"Current status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n  };\n\n  const endProposalsRegistering = async (e) => {\n    const transact = await contract.methods\n      .endProposalsRegistering()\n      .send({ from: accounts[0] });\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n    //get event from transaction.0\n    showEvent(\n      \"Workflow updated to  :\" +\n      transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n    console.log(\n      \"Previous status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.previousStatus\n    );\n    console.log(\n      \"Current status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n  };\n\n  const startVotingSession = async (e) => {\n    const transact = await contract.methods\n      .startVotingSession()\n      .send({ from: accounts[0] });\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n    //get event from transaction.0\n    showEvent(\n      \"Workflow updated to  :\" +\n      transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n    console.log(\n      \"Previous status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.previousStatus\n    );\n    console.log(\n      \"Current status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n  };\n\n  const endVotingSession = async (e) => {\n    const transact = await contract.methods\n      .endVotingSession()\n      .send({ from: accounts[0] });\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n    //get event from transaction.0\n    showEvent(\n      \"Workflow updated to  :\" +\n      transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n    console.log(\n      \"Previous status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.previousStatus\n    );\n    console.log(\n      \"Current status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n  };\n\n  const tallyVotes = async (e) => {\n    const transact = await contract.methods\n      .tallyVotes()\n      .send({ from: accounts[0] });\n    const value = await contract.methods\n      .workflowStatus()\n      .call({ from: accounts[0] });\n    setWorkflowStatus(value);\n    handleWorkflowStatusCheck(value);\n\n    showEvent(\n      \"Workflow updated to  :\" +\n      transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n    console.log(\n      \"Previous status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.previousStatus\n    );\n    console.log(\n      \"Current status  :\" +\n        transact.events.WorkflowStatusChange.returnValues.newStatus\n    );\n  };\n\n  return (\n    <div className=\"workflow-container\">\n      <span className=\"admin-instruction\">Workflow management</span>\n      <div className=\"workflow-actions\">\n        <button\n          className=\"worflow-button\"\n          disabled={!checkStatus(1)}\n          onClick={startProposalsRegistering}\n        >\n          Start proposal registration\n        </button>\n        <button\n          className=\"worflow-button\"\n          disabled={!checkStatus(2)}\n          onClick={endProposalsRegistering}\n        >\n          End proposal registration\n        </button>\n        <button\n          className=\"worflow-button\"\n          disabled={!checkStatus(3)}\n          onClick={startVotingSession}\n        >\n          Start voting session\n        </button>\n        <button\n          className=\"worflow-button\"\n          disabled={!checkStatus(4)}\n          onClick={endVotingSession}\n        >\n          End voting session\n        </button>\n        <button\n          className=\"worflow-button\"\n          disabled={!checkStatus(5)}\n          onClick={tallyVotes}\n        >\n          Tally vote\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Worflow;\n","import { useState, useEffect } from \"react\";\nimport \"./EventDisplayer.css\";\n\nfunction EventDisplayer({ raisedEvent, showEvent }) {\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (raisedEvent && raisedEvent.length > 0) {\n        showEvent(\"\");\n      }\n    }, 3000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [raisedEvent, showEvent]);\n\n  return (\n    <div>\n      {raisedEvent.length > 0 && (\n        <div className=\"eventDisplayer-container\">\n          <span>{raisedEvent}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EventDisplayer;\n","import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./Navbar.css\";\n\nfunction Navbar() {\n  const [displaySubNav, setDisplaySubNav] = useState(false);\n\n  const showSubNav = () => {\n    setDisplaySubNav(true);\n  };\n\n  const hideSubNav = () => {\n    setDisplaySubNav(false);\n  };\n\n  return (\n    <nav>\n      <div className=\"navbar\">\n        <div className=\"navbar-menu\">\n          <Link\n            to=\"VotingReact/\"\n            className=\"menu-bar\"\n            onMouseEnter={hideSubNav}\n          >\n            Home\n          </Link>\n          <Link\n            to=\"VotingReact/transferOwner\"\n            className=\"menu-bar\"\n            onMouseEnter={hideSubNav}\n          >\n            Transfer Owner\n          </Link>\n          <Link\n            to=\"VotingReact/workflow\"\n            className=\"menu-bar\"\n            onMouseEnter={hideSubNav}\n          >\n            Workflow\n          </Link>\n          <Link to=\"#\" className=\"menu-bar-events\" onMouseEnter={showSubNav}>\n            Events\n          </Link>\n        </div>\n        <div\n          className=\"subnav-content\"\n          style={{ visibility: displaySubNav ? \"visible\" : \"hidden\" }}\n        >\n          <Link to=\"VotingReact/event/voter\" className=\"menu-bar\">\n            {\" \"}\n            Voter registration\n          </Link>\n          <Link to=\"VotingReact/event/workflow\" className=\"menu-bar\">\n            {\" \"}\n            Workflow status\n          </Link>\n          <Link to=\"VotingReact/event/proposal\" className=\"menu-bar\">\n            {\" \"}\n            Proposal registration\n          </Link>\n\n          <Link to=\"VotingReact/event/vote\" className=\"menu-bar\">\n            {\" \"}\n            Vote\n          </Link>\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nexport default Navbar;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./VoterRegistration.css\";\n\nfunction VoterRegistration({ showEvent }) {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n  const [voterAddressList, setVoterAddressList] = useState([\n    { voterAddress: \"\", valid: 0 },\n  ]);\n\n  const handleAddVoter = () => {\n    setVoterAddressList([...voterAddressList, { voterAddress: \"\", valid: 0 }]);\n  };\n\n  const handleAddressChange = (e, index) => {\n    const { name, value } = e.target;\n    const listVoter = [...voterAddressList];\n    listVoter[index][name] = value;\n    console.log(\"adress length\" + value.length);\n    if (value.length === 42) {\n      listVoter[index][\"valid\"] = 1;\n      console.log(\"address valid\");\n    } else {\n      listVoter[index][\"valid\"] = 0;\n    }\n    setVoterAddressList(listVoter);\n  };\n\n  const handleRegisterVoters = async (index) => {\n    console.log(voterAddressList[index].voterAddress);\n    const transact = await contract.methods\n      .addVoter(voterAddressList[index].voterAddress)\n      .send({ from: accounts[0] });\n    showEvent(\n      \"Voter added  :\" +\n        transact.events.VoterRegistered.returnValues.voterAddress\n    );\n  };\n\n  const checkAddressLength = (addressLength) => {\n    return addressLength == 42;\n  };\n\n  return (\n    <div className=\"voterRegistration-main\">\n      <span className=\"admin-instruction\">\n        Admin please proceed with voter address registration before moving to\n        next phase\n      </span>\n      {voterAddressList.map((currentVoter, index) => (\n        <div key={index} className=\"voterRegistration-operation\">\n          <div className=\"voterRegistration-add\">\n            <div className=\"voterRegistration-input\">\n              <input\n                className=\"voterRegistration-inputTxt\"\n                name=\"voterAddress\"\n                type=\"text\"\n                id=\"voterAddress\"\n                placeholder=\"Enter address\"\n                value={currentVoter.voterAddress}\n                onChange={(e) => handleAddressChange(e, index)}\n              ></input>\n              {currentVoter.valid === 0 &&\n                currentVoter.voterAddress.length > 0 && (\n                  <div className=\"voterRegistration-alert\">\n                    <p>!</p>\n                  </div>\n                )}\n              <button\n                type=\"button\"\n                className=\"registerVoter-button\"\n                onClick={() => handleRegisterVoters(index)}\n                disabled={!checkAddressLength(currentVoter.voterAddress.length)}\n              >\n                <span>Register address to contract</span>\n              </button>\n\n              {voterAddressList.length - 1 === index &&\n                voterAddressList.length < 100 && (\n                  <button\n                    type=\"button\"\n                    className=\"addVoter-button\"\n                    onClick={handleAddVoter}\n                  >\n                    <span>Add a new voter address</span>\n                  </button>\n                )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default VoterRegistration;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./ProposalRegistration.css\";\n\nfunction ProposalRegistration({ showEvent }) {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n\n  const [proposalList, setProposalList] = useState([\n    { proposal: \"\", registered: 0 },\n  ]);\n\n  const handleAddProposal = () => {\n    setProposalList([...proposalList, { proposal: \"\", registered: 0 }]);\n  };\n\n  useEffect(() => {\n    setProposalList([{ proposal: \"\", registered: 0 }]);\n  }, [accounts]);\n\n  //   const handleRemoveProposal = (index) => {\n  //     console.log(\"RemoveProposal\");\n  //     const listProposal = [...proposalList];\n  //     console.log(index);\n  //     console.log(listProposal);\n  //     listProposal.splice(index, 1);\n  //     setProposalList(listProposal);\n  //   };\n\n  const handleChange = (e, index) => {\n    const { name, value } = e.target;\n    const listProposal = [...proposalList];\n    listProposal[index][name] = value;\n    setProposalList(listProposal);\n  };\n\n  const handleRegisterProposals = async (index) => {\n    const prop = proposalList[index].proposal;\n    const transact = await contract.methods\n      .addProposal(prop)\n      .send({ from: accounts[0] });\n    showEvent(\n      \"Proposal added  : \" +\n        transact.events.ProposalRegistered.returnValues.proposalId\n    );\n    console.log(\n      \"Proposal added  : \" +\n        transact.events.ProposalRegistered.returnValues.proposalId\n    );\n\n    const listProposal = [...proposalList];\n    listProposal[index][\"registered\"] = 1;\n    setProposalList(listProposal);\n  };\n\n  return (\n    <div className=\"proposalRegistration-main\">\n      <span className=\"admin-instruction\">\n        Please proceed with proposal registration\n      </span>\n      {proposalList.map((currentProposal, index) => (\n        <div key={index} className=\"proposalRegistration-operation\">\n          <div className=\"proposalRegistration-add\">\n            <div className=\"proposalRegistration-input\">\n              <input\n                className=\"proposalRegistration-inputTxt\"\n                name=\"proposal\"\n                type=\"text\"\n                id=\"proposal\"\n                placeholder=\"Enter proposal\"\n                disabled={currentProposal.registered}\n                value={currentProposal.proposal}\n                onChange={(e) => handleChange(e, index)}\n              ></input>\n              {currentProposal.proposal.length > 0 && (\n                <button\n                  type=\"button\"\n                  className=\"registerProposal-button\"\n                  disabled={currentProposal.registered}\n                  onClick={() => handleRegisterProposals(index)}\n                >\n                  <span>Register proposal to smart contract</span>\n                </button>\n              )}\n            </div>\n            {proposalList.length - 1 === index && proposalList.length < 100 && (\n              <button\n                type=\"button\"\n                className=\"addProposal-button\"\n                onClick={handleAddProposal}\n              >\n                <span>Create a new proposal</span>\n              </button>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ProposalRegistration;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./ProposalItem.css\";\n\nfunction ProposalItem({\n  id,\n  hasVoted,\n  handleHasVotedCheck,\n  proposalIdVotedFor,\n  showEvent,\n}) {\n  const {\n    state: { accounts, contract },\n  } = useEth();\n\n  const [data, setData] = useState();\n  const [voteId, setVoteId] = useState(proposalIdVotedFor);\n\n  useEffect(() => {\n    console.log(\"proposalIdVotedFor from PropItem : \" + proposalIdVotedFor);\n    if (contract) {\n      retrievePropName(id);\n      setVoteId(proposalIdVotedFor);\n    }\n  }, [contract, accounts, proposalIdVotedFor]);\n\n  const retrievePropName = async (idProp) => {\n    const proposal = await contract.methods\n      .getOneProposal(idProp)\n      .call({ from: accounts[0] });\n    if (proposal) {\n      //   setProposalList([proposal, ...proposalList]);\n      setData({\n        description: proposal.description,\n        voteCount: proposal.voteCount,\n      });\n      //   console.log(id);\n      //   const list = [...proposalList, { id: data.id }];\n      //   console.log(list.length);\n      //   setProposalList(list);\n    } else {\n      console.log(\"no proposal retrieve\");\n    }\n  };\n\n  const handleVote = async () => {\n    const transac = await contract.methods\n      .setVote(id)\n      .send({ from: accounts[0] });\n    handleHasVotedCheck(true);\n    setVoteId(id);\n    showEvent(\n      \"Vote register  : \" +\n        transac.events.Voted.returnValues.voter +\n        \" for prop id \" +\n        transac.events.Voted.returnValues.proposalId\n    );\n    console.log(\n      \"Vote register  : \" +\n        transac.events.Voted.returnValues.voter +\n        \" for prop id \" +\n        transac.events.Voted.returnValues.proposalId\n    );\n  };\n  console.log(\"voteId :\" + voteId + \" | id :\" + id);\n\n  return (\n    <div key={id} className=\"proposalItem-container\">\n      <h2>{data && data.description}</h2>\n      <p>Number of vote : {data && data.voteCount}</p>\n      {voteId == id && <p> You voted for this prop</p>}\n      {voteId != id && (\n        <button\n          className=\"proposalItem-button\"\n          disabled={hasVoted}\n          onClick={handleVote}\n        >\n          Vote\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default ProposalItem;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport ProposalItem from \"../ProposalItem/ProposalItem\";\nimport \"./ProposalList.css\";\n\nfunction ProposalList({\n  hasVoted,\n  handleHasVotedCheck,\n  proposalIdVotedFor,\n  showEvent,\n}) {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n\n  const [pastEvents, setPastEvents] = useState([]);\n  let loading = false;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await getProposalList();\n      loading = false;\n    };\n\n    if (contract && !loading) {\n      fetchData();\n    }\n  }, [contract, accounts, proposalIdVotedFor]);\n\n  const getProposalList = async () => {\n    loading = true;\n    let optionsPast = {\n      filter: {\n        value: [],\n      },\n      fromBlock: 0,\n      toBlock: \"latest\",\n    };\n\n    await contract.getPastEvents(\n      \"ProposalRegistered\",\n      optionsPast,\n      (error, events) => {\n        console.log(events);\n        setPastEvents(events);\n      }\n    );\n  };\n\n  return (\n    <div className=\"proposalList-container\">\n      <span className=\"instruction\">Please vote for the proposal you want</span>\n\n      <div className=\"proposalList-main\">\n        {pastEvents.map((event) => (\n          <div key={event.returnValues.proposalId}>\n            <ProposalItem\n              id={event.returnValues.proposalId}\n              hasVoted={hasVoted}\n              handleHasVotedCheck={handleHasVotedCheck}\n              proposalIdVotedFor={proposalIdVotedFor}\n              showEvent={showEvent}\n            ></ProposalItem>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\nexport default ProposalList;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./VoteResult.css\";\n\nfunction VoteResult() {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n\n  const [winingProposal, setWinningProposal] = useState();\n\n  useEffect(() => {\n    if (contract) {\n      getWinner();\n    }\n  }, [contract]);\n\n  const getWinner = async () => {\n    const winningProposalId = await contract.methods\n      .winningProposalId()\n      .call({ from: accounts[0] });\n    // const proposal = await contract.methods\n    //   .getOneProposal(winningProposalId)\n    //   .call({ from: accounts[0] });\n\n    setWinningProposal(winningProposalId);\n  };\n\n  return (\n    <div className=\"voterResult-container\">\n      <span className=\"voterResult-instruction\">Winner result</span>\n      <div className=\"voterResult-txt\">\n        <span className=\"voterResult-result\">\n          {winingProposal && (\n            <span>Winner is proposal with id : {winingProposal}</span>\n          )}\n        </span>\n      </div>\n    </div>\n  );\n}\nexport default VoteResult;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./VoterInfo.css\";\n\nfunction VoterInfo() {\n  const {\n    state: { accounts, contract },\n  } = useEth();\n\n  const [voter, setVoter] = useState();\n  const [address, setAddress] = useState(\"\");\n  const [addressValid, setAddressValid] = useState(false);\n  const [proposal, setProposal] = useState(false);\n  const [answer, setAnswer] = useState(\"\");\n\n  useEffect(() => {\n    setAddress(\"\");\n    setAnswer(\"\");\n  }, [accounts]);\n\n  const handleChange = (e) => {\n    const { value } = e.target;\n    if (value.length === 42) {\n      setAddressValid(true);\n      setAddress(value);\n    }\n  };\n\n  const checkVoterInfo = async () => {\n    try {\n      const voterInfo = await contract.methods\n        .getVoter(address)\n        .call({ from: accounts[0] });\n      if (voterInfo) {\n        setVoter(voterInfo);\n\n        if (voterInfo.hasVoted && voterInfo.votedProposalId >= 0) {\n          const proposal = await contract.methods\n            .getOneProposal(voterInfo.votedProposalId)\n            .call({ from: accounts[0] });\n          setProposal(proposal);\n          setAnswer(\n            \"Voter with address \" +\n              address +\n              \"has voted for \" +\n              proposal.description\n          );\n        } else {\n          setAnswer(\"Voter with address \" + address + \" didn't vote\");\n        }\n      }\n    } catch (err) {\n      setAnswer(\"No data for address \" + address);\n    }\n  };\n\n  return (\n    <div className=\"voterInfo-container\">\n      <span className=\"voterInfo-instruction\">Check vote by address</span>\n      <div className=\"voterInfo-main\">\n        <input\n          className=\"voterInfo-inputTxt\"\n          name=\"voterAddress\"\n          type=\"text\"\n          id=\"voterAddress\"\n          value={address}\n          onChange={(e) => handleChange(e)}\n        ></input>\n        <button\n          className=\"voterInfo-button\"\n          disabled={!addressValid}\n          onClick={checkVoterInfo}\n        >\n          Get voter result\n        </button>\n      </div>\n      <span className=\"instruction\">{answer}</span>\n    </div>\n  );\n}\n\nexport default VoterInfo;\n","import React from \"react\";\nimport VoterRegistration from \"../VoterRegistration/VoterRegistration\";\nimport ProposalRegistration from \"../ProposalRegistration/ProposalRegistration\";\nimport ProposalList from \"../ProposalList/ProposalList\"\nimport VoteResult from \"../VoteResult/VoteResult\";\nimport VoterInfo from \"../VoterInfo/VoterInfo\";\n\nfunction Home({\n  isOwner,\n  isRegister,\n  currentWorflow,\n  showEvent,\n  hasVoted,\n  handleHasVotedCheck,\n  proposalIdVotedFor,\n}) {\n  return (\n    <div>\n      {isOwner && currentWorflow == 0 && (\n        <VoterRegistration showEvent={showEvent} />\n      )}\n\n      {isRegister && currentWorflow == 1 && (\n        <ProposalRegistration showEvent={showEvent} />\n      )}\n\n      {isRegister && currentWorflow == 3 && (\n        <ProposalList\n          hasVoted={hasVoted}\n          handleHasVotedCheck={handleHasVotedCheck}\n          proposalIdVotedFor={proposalIdVotedFor}\n          showEvent={showEvent}\n        />\n      )}\n      {currentWorflow == 5 && <VoteResult />}\n      {currentWorflow == 5 && isRegister && <VoterInfo />}\n      {currentWorflow == 0 && !isOwner && (\n        <span className=\"instruction\">\n          {\" \"}\n          Addresses are currently registered. Please come back later !\n        </span>\n      )}\n      {currentWorflow > 0 && !isRegister && (\n        <span className=\"instruction\">\n          {\" \"}\n          You're are not registered to participate to this voting session.\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default Home;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport \"./Events.css\";\n\nfunction Events({ type }) {\n  const {\n    state: { contract },\n  } = useEth();\n\n  const [workflowEvents, setWorkflowEvents] = useState([]);\n  const [proposalEvents, setProposalEvents] = useState([]);\n  const [voterEvents, setVoterEvents] = useState([]);\n  const [voteEvents, setVoteEvents] = useState([]);\n\n  let optionsPast = {\n    filter: {\n      value: [],\n    },\n    fromBlock: 0,\n    toBlock: \"latest\",\n  };\n\n  let optionsNew = {\n    filter: {\n      value: [],\n    },\n    fromBlock: \"latest\",\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await watchEvents();\n    };\n\n    if (contract) {\n      fetchData();\n    }\n  }, [contract]);\n\n  const watchEvents = () => {\n    switch (type) {\n      case \"ProposalRegistered\":\n        listenProposal();\n      case \"WorkflowStatusChange\":\n        listenWorkflowStatus();\n      case \"VoterRegistered\":\n        listenVoter();\n      case \"Vote\":\n        listenVote();\n    }\n  };\n\n  const listenProposal = async () => {\n    await contract.getPastEvents(\n      \"ProposalRegistered\",\n      optionsPast,\n      (error, oldEvents) => {\n        if (oldEvents.length > 0) {\n          let listId = [...proposalEvents];\n          oldEvents.map(\n            (e) => (listId = [, e.returnValues.proposalId, ...listId])\n          );\n          setProposalEvents(listId);\n        }\n      }\n    );\n    console.log(\"proposalEvents : \" + proposalEvents);\n    contract.events.ProposalRegistered(optionsNew).on(\"data\", (newEvent) => {\n      setProposalEvents([newEvent.returnValues.proposalId, ...proposalEvents]);\n    });\n  };\n\n  const listenWorkflowStatus = async () => {\n    await contract.getPastEvents(\n      \"WorkflowStatusChange\",\n      optionsPast,\n      (error, oldEvents) => {\n        if (oldEvents.length > 0) {\n          let listId = [...workflowEvents];\n          oldEvents.map(\n            (e) => (listId = [e.returnValues.newStatus, ...listId])\n          );\n          setWorkflowEvents(listId);\n        }\n      }\n    );\n\n    contract.events.WorkflowStatusChange(optionsNew).on(\"data\", (newEvent) => {\n      setWorkflowEvents([newEvent.returnValues.newStatus, ...workflowEvents]);\n    });\n  };\n\n  const listenVoter = async () => {\n    await contract.getPastEvents(\n      \"VoterRegistered\",\n      optionsPast,\n      (error, oldEvents) => {\n        if (oldEvents.length > 0) {\n          let listAddress = [...voterEvents];\n          console.log(oldEvents);\n          oldEvents.map(\n            (e) => (listAddress = [e.returnValues.voterAddress, ...voterEvents])\n          );\n          setVoterEvents(listAddress);\n        }\n      }\n    );\n\n    contract.events.VoterRegistered(optionsNew).on(\"data\", (newEvent) => {\n      setVoterEvents([newEvent.returnValues.voterAddress, ...voterEvents]);\n    });\n  };\n\n  const listenVote = async () => {\n    await contract.getPastEvents(\"Voted\", optionsPast, (error, oldEvents) => {\n      if (oldEvents.length > 0) {\n        let listVote = [...voteEvents];\n        const data = oldEvents.map(\n          (e) =>\n            (listVote = [\n              ...voteEvents,\n              {\n                voter: e.returnValues.voter,\n                voteId: e.returnValues.proposalId,\n              },\n            ])\n        );\n        setVoteEvents(listVote);\n      }\n    });\n\n    contract.events.Voted(optionsNew).on(\"data\", (newEvent) => {\n      const data = {\n        voter: newEvent.returnValues.voter,\n        voteId: newEvent.returnValues.proposalId,\n      };\n      setVoteEvents([data, ...voteEvents]);\n    });\n  };\n\n  switch (type) {\n    case \"ProposalRegistered\":\n      return (\n        <div className=\"registeredEvents-container\">\n          {proposalEvents.length > 0 &&\n            proposalEvents.map((currentEvent) => (\n              <span key={currentEvent} className=\"instruction\">\n                Proposal registered with id : {currentEvent}\n              </span>\n            ))}\n          {proposalEvents.length == 0 && (\n            <span className=\"instruction\">No events</span>\n          )}\n        </div>\n      );\n    case \"WorkflowStatusChange\":\n      return (\n        <div className=\"registeredEvents-container\">\n          {workflowEvents.length > 0 &&\n            workflowEvents.map((currentEvent) => (\n              <span key={currentEvent} className=\"instruction\">\n                Workflow updated to : {currentEvent}\n              </span>\n            ))}\n          {workflowEvents.length == 0 && (\n            <span className=\"instruction\">No events</span>\n          )}\n        </div>\n      );\n    case \"VoterRegistered\":\n      return (\n        <div className=\"registeredEvents-container\">\n          {voterEvents.length > 0 &&\n            voterEvents.map((currentEvent) => (\n              <span key={currentEvent} className=\"instruction\">\n                Voter registered with address : {currentEvent}\n              </span>\n            ))}\n          {voterEvents.length == 0 && (\n            <span className=\"instruction\">No events</span>\n          )}\n        </div>\n      );\n    case \"Vote\":\n      return (\n        <div className=\"registeredEvents-container\">\n          {voteEvents.length > 0 &&\n            voteEvents.map((currentEvent) => (\n              <span key={currentEvent.voter} className=\"instruction\">\n                Vote registered for address : {currentEvent.voter} and proposal\n                : {currentEvent.voteId}\n              </span>\n            ))}\n          {voteEvents.length == 0 && (\n            <span className=\"instruction\">No events</span>\n          )}\n        </div>\n      );\n    default:\n      return <span className=\"instruction\">No events</span>;\n  }\n}\n\nexport default Events;\n","import { useState, useEffect } from \"react\";\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./TransferOwnerShip.css\";\n\nfunction TransferOnwerShip({ handleOwnerCheck }) {\n  const {\n    state: { contract, accounts },\n  } = useEth();\n\n  const [newOwner, setNewOwner] = useState(\"\");\n  const [valid, setValid] = useState(0);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setNewOwner(\"\");\n    setValid(0);\n  }, [accounts]);\n\n  const handleOwnerChange = (e) => {\n    const { name, value } = e.target;\n    console.log(\"adress length\" + value.length);\n    if (value.length === 42) {\n      setValid(1);\n    } else {\n      setValid(0);\n    }\n    setNewOwner(value);\n  };\n\n  const handleOwnerRegistration = async () => {\n    try {\n      const transact = await contract.methods\n        .transferOwnership(newOwner)\n        .send({ from: accounts[0] });\n      handleOwnerCheck(false);\n      navigate(\"/\");\n    } catch (error) {}\n  };\n\n  return (\n    <div className=\"ownerRegistration-main\">\n      <span className=\"admin-instruction\">\n        Admin please proceed with new owner registration\n      </span>\n      <div className=\"ownerRegistration-input\">\n        {newOwner.length > 0 && valid == 0 && (\n          <div className=\"ownerRegistration-alert\">\n            <p>!</p>\n          </div>\n        )}\n        <input\n          className=\"ownerRegistration-inputTxt\"\n          name=\"ownerAddress\"\n          type=\"text\"\n          id=\"ownerAddress\"\n          placeholder=\"Enter address\"\n          onChange={(e) => handleOwnerChange(e)}\n        ></input>\n\n        <button\n          type=\"button\"\n          className=\"registerOwner-button\"\n          onClick={handleOwnerRegistration}\n          disabled={!valid}\n        >\n          <span>Register new onwer</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default TransferOnwerShip;\n","import { useState } from \"react\";\nimport { EthProvider } from \"./contexts/EthContext\";\nimport Account from \"./components/Account/AccoutInfo\";\nimport Worflow from \"./components/Worflow/Workflow\";\nimport EventDisplayer from \"./components/EventDisplayer/EventDisplayer\";\nimport Navbar from \"./components/NavBar/Navbar\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport Home from \"./components/Home/Home\";\nimport Events from \"./components/Events/Events\";\nimport TransferOnwerShip from \"./components/TransferOwnerShip/TransferOnwerShip\";\nimport \"./App.css\";\n\nfunction App() {\n  const [isOwner, setOwner] = useState(false);\n  const [isRegister, setRegistered] = useState(false);\n  const [hasVoted, setHasVoted] = useState(false);\n  const [proposalIdVotedFor, setProposalIfVotedFor] = useState(-1);\n  const [currentWorflow, setCurrentWorflow] = useState(0);\n  const [raisedEvent, SetRaisedEvent] = useState(\"\");\n\n  function handleOwnerCheck(owner) {\n    setOwner(owner);\n  }\n\n  function handleVoterRegisteredCheck(registered) {\n    setRegistered(registered);\n  }\n\n  function handleHasVotedCheck(voted) {\n    setHasVoted(voted);\n  }\n\n  function handleProposalIfVotedFor(propIdVotedFor) {\n    setProposalIfVotedFor(propIdVotedFor);\n  }\n\n  function handleWorkflowStatusCheck(status) {\n    setCurrentWorflow(status);\n  }\n\n  const showEvent = (raisedEvent) => {\n    SetRaisedEvent(raisedEvent);\n  };\n\n  return (\n    <BrowserRouter>\n      <EthProvider>\n        <div id=\"App\">\n          <div className=\"container\">\n            <div className=\"header\">\n              {isOwner && <Navbar></Navbar>}\n              <Account\n                handleOwnerCheck={handleOwnerCheck}\n                handleVoterRegisteredCheck={handleVoterRegisteredCheck}\n                handleHasVotedCheck={handleHasVotedCheck}\n                handleProposalIfVotedFor={handleProposalIfVotedFor}\n                handleWorkflowStatusCheck={handleWorkflowStatusCheck}\n              />\n            </div>\n            <hr />\n            <Routes>\n              <Route\n                path=\"VotingReact/workflow\"\n                element={\n                  isOwner && (\n                    <Worflow\n                      handleWorkflowStatusCheck={handleWorkflowStatusCheck}\n                      showEvent={showEvent}\n                    />\n                  )\n                }\n              ></Route>\n              <Route\n                path=\"VotingReact/\"\n                element={\n                  <Home\n                    isOwner={isOwner}\n                    isRegister={isRegister}\n                    currentWorflow={currentWorflow}\n                    showEvent={showEvent}\n                    hasVoted={hasVoted}\n                    handleHasVotedCheck={handleHasVotedCheck}\n                    proposalIdVotedFor={proposalIdVotedFor}\n                  ></Home>\n                }\n              />\n              <Route\n                path=\"VotingReact/event/proposal\"\n                element={\n                  isOwner && (\n                    <Events\n                      key=\"ProposalRegistered\"\n                      type=\"ProposalRegistered\"\n                    ></Events>\n                  )\n                }\n              ></Route>\n              <Route\n                path=\"VotingReact/event/workflow\"\n                element={\n                  isOwner && (\n                    <Events\n                      key=\"WorkflowStatusChange\"\n                      type=\"WorkflowStatusChange\"\n                    ></Events>\n                  )\n                }\n              ></Route>\n              <Route\n                path=\"VotingReact/event/voter\"\n                element={\n                  isOwner && (\n                    <Events\n                      key=\"VoterRegistered\"\n                      type=\"VoterRegistered\"\n                    ></Events>\n                  )\n                }\n              ></Route>\n              <Route\n                path=\"VotingReact/event/vote\"\n                element={isOwner && <Events key=\"Vote\" type=\"Vote\"></Events>}\n              ></Route>\n              <Route\n                path=\"VotingReact/transferOwner\"\n                element={\n                  isOwner && (\n                    <TransferOnwerShip\n                      handleOwnerCheck={handleOwnerCheck}\n                    ></TransferOnwerShip>\n                  )\n                }\n              ></Route>\n              <Route\n                path=\"*\"\n                element={<Navigate to=\"VotingReact/\" replace />}\n              ></Route>\n            </Routes>\n            <EventDisplayer\n              raisedEvent={raisedEvent}\n              showEvent={showEvent}\n            ></EventDisplayer>\n          </div>\n        </div>\n      </EthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}